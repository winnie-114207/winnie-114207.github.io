<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>ç¶²ç«™</title>
    <link rel="icon" href="star.png">
  </head>
  <body>
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è…¦åŠ›é–‹ç™¼ä¸­å¿ƒ - å®Œç¾ä¸­æ–‡åˆ¤å®šç‰ˆ</title>
    <style>
        :root { --p: #4f46e5; --s: #10b981; --bg: #f3f4f6; --danger: #ef4444; }
        body { font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .card { background: white; width: 650px; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; }
        .screen { display: none; }
        .screen.active { display: block; }
        h1 { font-size: 2.5rem; color: var(--p); margin-top: 0; }
        .menu-btns { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
        button { padding: 15px; font-size: 1.1rem; cursor: pointer; border: none; border-radius: 10px; transition: 0.2s; background: var(--p); color: white; }
        button:hover { opacity: 0.9; transform: translateY(-2px); }
        .exit-btn { background: var(--danger); margin-top: 15px; padding: 10px; font-size: 1rem; width: 100%; }
        .back-btn { background: #6b7280; margin-top: 20px; padding: 10px; font-size: 1rem; width: 100%; }
        #type-sample { background: #f9fafb; padding: 20px; margin: 15px 0; border-radius: 8px; text-align: left; line-height: 1.6; border-left: 5px solid var(--p); font-size: 1.1rem; min-height: 80px; word-break: break-all; }
        #input-area { width: 100%; height: 90px; margin-bottom: 10px; padding: 12px; box-sizing: border-box; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px; resize: none; }
        .timer { font-size: 2.5rem; color: var(--danger); font-weight: bold; margin: 5px 0; }
        #memory-board { position: relative; width: 100%; height: 380px; background: #e5e7eb; border-radius: 10px; margin-top: 15px; overflow: hidden; }
        .node { position: absolute; width: 50px; height: 50px; background: var(--s); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; cursor: pointer; }
        .node.hidden { font-size: 0; background: #4f46e5; }
    </style>
</head>
<body>

<div class="card">
    <div id="screen-home" class="screen active">
        <h1>ğŸ§  è…¦åŠ›éŠæˆ²</h1>
        <p>å°ˆæ¥­ä¸­æ–‡è¼¸å…¥å„ªåŒ–ç‰ˆæœ¬</p>
        <button onclick="showScreen('screen-lobby')" style="width: 200px;">é»æ“Šé–‹å§‹</button>
    </div>

    <div id="screen-lobby" class="screen">
        <h2>æ¨¡å¼é¸æ“‡</h2>
        <div class="menu-btns">
            <button onclick="showScreen('screen-typing')">âŒ¨ï¸ æ‰“å­—æ¸¬é€Ÿ (10ç§’)</button>
            <button onclick="showScreen('screen-memory')" style="background:var(--s)">ğŸ§  è¨˜æ†¶é€Ÿåº¦æŒ‘æˆ°</button>
        </div>
        <button class="back-btn" onclick="showScreen('screen-home')">è¿”å›ä¸»é¸å–®</button>
    </div>

    <div id="screen-typing" class="screen">
        <h3>æ‰“å­—æŒ‘æˆ° (10s)</h3>
        <p>æœ€é«˜ç´€éŒ„: <span id="type-best">0</span> å­—/åˆ†</p>
        <div class="timer" id="type-timer">10</div>
        <div id="type-sample">æº–å‚™ä¸­...</div>
        <textarea id="input-area" disabled placeholder="è¨ˆæ™‚é–‹å§‹å¾Œï¼Œè«‹ä¾ç…§ä¸Šæ–¹ç¯„æ–‡è¼¸å…¥..."></textarea>
        <div class="menu-btns" id="type-ctrl">
            <button onclick="startTyping('en')">éš¨æ©Ÿè‹±æ–‡</button>
            <button onclick="startTyping('zh')" style="background:var(--s)">éš¨æ©Ÿä¸­æ–‡</button>
        </div>
        <button class="exit-btn" onclick="abortTyping()">é€€å‡ºéŠæˆ²</button>
    </div>

    <div id="screen-memory" class="screen">
        <h3>è¨˜æ†¶æŒ‘æˆ°</h3>
        <p>æœ€é«˜ç´€éŒ„: ç¬¬ <span id="mem-best">0</span> é—œ</p>
        <p id="mem-status">é»æ“Šå•Ÿå‹•é–‹å§‹éŠæˆ²</p>
        <div id="memory-board"></div>
        <button id="mem-start-btn" onclick="startMemoryGame()" style="margin-top:15px; width:100%">å•Ÿå‹•æŒ‘æˆ°</button>
        <button class="exit-btn" onclick="abortMemory()">é€€å‡ºéŠæˆ²</button>
    </div>
</div>

<script>
    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(id === 'screen-typing') loadTypeBest();
        if(id === 'screen-memory') loadMemBest();
    }

    const typeRepo = {
        en: ["The rapid development of artificial intelligence is changing how we work and live in the modern digital age.", "Success is not final, failure is not fatal: it is the courage to continue that really counts.", "Inspiration exists, but it has to find you working hard every single day to achieve your personal goals.", "Be yourself; everyone else is already taken. Stay hungry, stay foolish, and always keep moving forward.", "The only way to do great work is to love what you do. If you haven't found it yet, keep looking."],
        zh: ["ç§‘æŠ€çš„é€²æ­¥è®“ä¸–ç•Œè®Šå¾—æ›´åŠ ç·Šå¯†ï¼Œæˆ‘å€‘æ‡‰è©²å­¸æœƒå¦‚ä½•æœ‰æ•ˆåœ°åˆ©ç”¨é€™äº›è³‡æºä¾†æå‡è‡ªå·±çš„å·¥ä½œç«¶çˆ­åŠ›ã€‚", "äººç”Ÿæœ€ç²¾å½©çš„ä¸¦éæ°¸é ä¸å¤±æ•—ï¼Œè€Œæ˜¯æ¯æ¬¡è·Œå€’éƒ½èƒ½å …å¼·åœ°ç«™èµ·ä¾†ï¼Œä¸¦å¾éŒ¯èª¤ä¸­å­¸ç¿’åˆ°å¯¶è²´çš„ç¶“é©—ã€‚", "å°ˆæ³¨æ–¼çœ¼ä¸‹çš„æ¯ä¸€ä»¶å°äº‹ï¼Œç•¶ä½ æŠŠç°¡å–®çš„äº‹æƒ…åšåˆ°æ¥µè‡´ï¼Œè‡ªç„¶å°±èƒ½åœ¨å¹³å‡¡ä¹‹ä¸­å‰µé€ å‡ºä¸å¹³å‡¡çš„åƒ¹å€¼ã€‚", "é–±è®€ä¸åƒ…èƒ½è®“æˆ‘å€‘ç²å¾—çŸ¥è­˜ï¼Œæ›´èƒ½é–‹é—Šæˆ‘å€‘çš„è¦–é‡ï¼Œè®“æˆ‘å€‘å­¸æœƒå¾ä¸åŒçš„è§’åº¦å»çœ‹å¾…é€™å€‹å¤šå…ƒçš„ä¸–ç•Œã€‚", "è‰¯å¥½çš„æºé€šæ˜¯å»ºç«‹äººéš›é—œä¿‚çš„åŸºçŸ³ï¼Œå­¸æœƒå‚¾è½ä»–äººçš„æƒ³æ³•ï¼Œæ‰èƒ½åœ¨åœ˜éšŠåˆä½œä¸­é”æˆå…±è­˜ä¸¦å‰µé€ é›™è´ã€‚"]
    };

    let typeInterval;
    const inputArea = document.getElementById('input-area');

    function loadTypeBest() { document.getElementById('type-best').innerText = localStorage.getItem('typeBest10s') || 0; }

    function startTyping(mode) {
        const samples = typeRepo[mode];
        const selectedSample = samples[Math.floor(Math.random() * samples.length)];
        let timeLeft = 10;
        document.getElementById('type-sample').innerText = selectedSample;
        document.getElementById('type-ctrl').style.display = 'none';
        inputArea.disabled = false;
        inputArea.value = "";
        inputArea.focus();

        typeInterval = setInterval(() => {
            timeLeft--;
            document.getElementById('type-timer').innerText = timeLeft;
            if(timeLeft <= 0) {
                clearInterval(typeInterval);
                checkResult(selectedSample);
            }
        }, 1000);
    }

    function checkResult(sample) {
        // å…ˆç²å–å…§å®¹å†é—œé–‰è¼¸å…¥æ¡†ï¼Œé¿å…æ³¨éŸ³è¢«å¼·è¡Œå¡å…¥
        let rawTyped = inputArea.value;
        inputArea.disabled = true;

        // ã€é—œéµå„ªåŒ–ã€‘éæ¿¾æ‰æ‰€æœ‰æ³¨éŸ³ç¬¦è™Ÿ (ã„…-ã„©, ËŠË‡Ë‹Ë™)
        // é€™äº›ç¬¦è™Ÿçš„ Unicode ç¯„åœæ˜¯ \u3105-\u3129 ä»¥åŠçµåˆèª¿è™Ÿ
        const cleanTyped = rawTyped.replace(/[\u3105-\u3129\u02CA\u02C7\u02CB\u02D9]/g, "");

        let isCorrect = cleanTyped.length > 0;
        for(let i=0; i < cleanTyped.length; i++) {
            if(cleanTyped[i] !== sample[i]) { isCorrect = false; break; }
        }

        const wpm = cleanTyped.length * 6;
        if(isCorrect) {
            let best = parseInt(localStorage.getItem('typeBest10s') || 0);
            if(wpm > best) localStorage.setItem('typeBest10s', wpm);
            alert(`å®Œç¾æ­£ç¢ºï¼(å·²è‡ªå‹•éæ¿¾æœ«å°¾æ³¨éŸ³)\né€Ÿåº¦ï¼š${wpm} å­—/åˆ†`);
        } else {
            alert(`åˆ¤å®šå¤±æ•—ï¼šå…§å®¹ä¸ç¬¦æˆ–åŒ…å«éŒ¯å­—ã€‚`);
        }
        resetTypeUI();
    }

    function abortTyping() {
        clearInterval(typeInterval);
        resetTypeUI();
        showScreen('screen-lobby');
    }

    function resetTypeUI() {
        document.getElementById('type-ctrl').style.display = 'flex';
        document.getElementById('type-timer').innerText = 10;
        inputArea.value = "";
        inputArea.disabled = true;
        document.getElementById('type-sample').innerText = "è«‹é¸æ“‡èªè¨€é–‹å§‹æŒ‘æˆ°...";
        loadTypeBest();
    }

    /* --- è¨˜æ†¶é‚è¼¯éƒ¨åˆ† (ä¿æŒåŸæ¨£) --- */
    let memLevel = 1, memSequence = [], userStep = 0, memTimer;
    function loadMemBest() { document.getElementById('mem-best').innerText = localStorage.getItem('memBest') || 0; }
    function startMemoryGame() { memLevel = 1; document.getElementById('mem-start-btn').style.display = 'none'; nextMemLevel(); }
    function nextMemLevel() {
        const board = document.getElementById('memory-board');
        board.innerHTML = ""; memSequence = []; userStep = 0;
        document.getElementById('mem-status').innerText = `ç¬¬ ${memLevel} é—œï¼šè¨˜ä½ä½ç½® (5s)`;
        for(let i=1; i <= memLevel; i++) {
            const node = document.createElement('div');
            node.className = 'node'; node.innerText = i;
            node.style.left = Math.random() * 85 + 5 + "%";
            node.style.top = Math.random() * 85 + 5 + "%";
            board.appendChild(node); memSequence.push(node);
        }
        clearTimeout(memTimer);
        memTimer = setTimeout(() => {
            memSequence.forEach(n => n.classList.add('hidden'));
            document.getElementById('mem-status').innerText = "è«‹ä¾åºé»æ“Šï¼";
            enableClicks();
        }, 5000);
    }
    function enableClicks() {
        memSequence.forEach(node => {
            node.onclick = function() {
                if(this.innerText == (userStep + 1)) {
                    this.classList.remove('hidden'); this.style.background = "#cbd5e1"; this.onclick = null;
                    userStep++;
                    if(userStep === memLevel) { memLevel++; setTimeout(nextMemLevel, 800); }
                } else {
                    alert("é †åºéŒ¯èª¤ï¼éŠæˆ²çµæŸã€‚");
                    let best = parseInt(localStorage.getItem('memBest') || 0);
                    if(memLevel-1 > best) localStorage.setItem('memBest', memLevel-1);
                    abortMemory();
                }
            };
        });
    }
    function abortMemory() {
        clearTimeout(memTimer);
        document.getElementById('memory-board').innerHTML = "";
        document.getElementById('mem-start-btn').style.display = 'block';
        document.getElementById('mem-status').innerText = "é»æ“Šå•Ÿå‹•é–‹å§‹éŠæˆ²";
        showScreen('screen-lobby');
    }
</script>

</body>
</html>
</body>
</html>
  </body>
</html>
